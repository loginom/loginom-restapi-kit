# Маршрутизация TomTom

[Назад к списку компонентов](../README.md)

## Назначение

Компонент рассчитывает расстояние между двумя географическими точками, учитывая маршруты, тип передвижения и трафик.

Ссылка на сервис: https://www.tomtom.com/products/routing-apis

## Входные порты

| Название          | Тип        |
|:------------------|:-----------|
| Координаты        | Таблица    |
| Переменные        | Переменные |

### Структура таблицы "Координаты"

| Метка        | Тип                                    | Описание                |
|:-------------|:---------------------------------------|:------------------------|
| Широта 1     | ![](./img/realnumber.svg) Вещественный | Широта начальной точки  |
| Долгота 1    | ![](./img/realnumber.svg) Вещественный | Долгота начальной точки |
| Широта 2     | ![](./img/realnumber.svg) Вещественный | Широта конечной точки   |
| Долгота 2    | ![](./img/realnumber.svg) Вещественный | Долгота конечной точки  |

### Переменные в порте "Переменные"

| № | Метка                               | Тип                                    | Значение    |
|:--|:------------------------------------|:---------------------------------------|:------------|
| 1 | API-ключ                            | ![](./img/string.svg) Строковый        | null        |
| 2 | Способ передвижения                 | ![](./img/string.svg) Строковый        | pedestrian  |
| 3 | Тип маршрута                        | ![](./img/string.svg) Строковый        | shortest    |
| 4 | Учет текущего трафика               | ![](./img/logical.svg) Логический      | false       |
| 5 | Тайм-аут подключения (мс)           | ![](./img/integer.svg) Целый           | 60000       |
| 6 | Тайм-аут обмена данными (мс)        | ![](./img/integer.svg) Целый           | 60000       |
| 7 | Игнорировать ошибки SSL сертификата | ![](./img/integer.svg) Целый           | false       |

1. **API-ключ** — личный ключ для доступа к сервису;
2. **Способ передвижения** — переменная, которая задает способ передвижения по заданному маршруту. Она принимает значения:
   * **pedestrian** — пешеход (по умолчанию);
   * **car** — машина;
   * **truck** — грузовик;
   * **taxi** — такси;
   * **bus** — автобус;
   * **van** — микроавтобус;
   * **motorcycle** — мотоцикл;
   * **bicycle** — велосипед.
3. **Тип маршрута** — может принимать значения:
   * **shortest** — самый короткий (по умолчанию);
   * **fastest** — самый быстрый;
   * **eco** — экологичный;
   * **trilling** — захватывающий.
4. **Учет текущего трафика** — переменная для учета влияния загруженности дорог на время передвижения. **True** — учитывает актуальный трафик (GPS), **False** — учитывает только исторические данные о трафике (по умолчанию).
5. **Тайм-аут подключения (мс)** — максимальное время установки TCP-соединения с сервером в миллисекундах, по истечении которого соединение будет прервано со статусом ошибки. Если параметр равен нулю, то таймаут не ограничен.          
6. **Тайм-аут обмена данными (мс)** — максимальное время, которое будет затрачено на отправку HTTP-запроса и получение ответа, по истечении которого обмен будет прерван со статусом ошибки. Если параметр равен нулю, то таймаут не ограничен.
7. **Игнорировать ошибки SSL сертификата** — если данный флаг установлен, то ошибки при проверке сертификата сервера, к которому производится подключение, игнорируются.

## Выходные порты

| Название              | Тип     |
|:----------------------|:--------|
| Выходной набор данных | Таблица |
| Сообщения             | Таблица |

### Структура таблицы "Выходной набор данных"

| Метка                               | Тип                                     | Описание                                                                              |
|:------------------------------------|:----------------------------------------|:--------------------------------------------------------------------------------------|
| Идентификатор                       | ![](./img/integer.svg) Целый            | Номер строки                                                                          |
| Широта 1                            | ![](./img/realnumber.svg) Вещественный  | Широта начальной точки                                                                |
| Долгота 1                           | ![](./img/realnumber.svg) Вещественный  | Долгота начальной точки                                                               |
| Широта 2                            | ![](./img/realnumber.svg) Вещественный  | Широта конечной точки                                                                 |
| Долгота 2                           | ![](./img/realnumber.svg) Вещественный  | Долгота конечной точки                                                                |
| Время отправления                   | ![](./img/datetime.svg) Дата/Время      | Время отправления из начальной точки. Текущее                                         |
| Время прибытия                      | ![](./img/datetime.svg) Дата/Время      | Время прибытия в конечную точку с учетом продолжительности поездки                    |
| Расстояние (километры)              | ![](./img/realnumber.svg) Вещественный  | Расстояние между начальной и конечной точками в километрах                            |
| Расстояние (метры)                  | ![](./img/realnumber.svg) Вещественный  | Расстояние между начальной и конечной точками в метрах                                |
| Продолжительность поездки           | ![](./img/string.svg) Строковый         | Продолжительность поездки из начальной в конечную точку в формате Часы:Минуты:Секунды |
| Продолжительность поездки (секунды) | ![](./img/realnumber.svg) Вещественный  | Продолжительность поездки из начальной в конечную точку в секундах                    |
| Задержки на дорогах (метры)         | ![](./img/realnumber.svg) Вещественный  | Общая длина загруженности дорог из-за трафика в метрах                                |
| Задержки на дорогах (секунды)       | ![](./img/realnumber.svg) Вещественный  | Время загруженности дорог в секундах                                                  |

### Структура таблицы "Сообщения"

| Метка                      | Тип                                | Описание                          |
|:---------------------------|:-----------------------------------|:----------------------------------|
| Идентификатор              | ![](./img/integer.svg) Целый       | Номер строки                      |
| Код завершения             | ![](./img/integer.svg) Целый       | В случае успеха возвращает **0**  |
| Описание ошибки            | ![](./img/string.svg) Сообщение    | В случае успеха возвращает **OK** |
| Код состояния HTTP         | ![](./img/integer.svg) Целый       | В случае усеха возвращает **200** |
